# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

runConfig:
  maxInstances: 1

# This section defines how incoming requests are routed.
routes:
  # This rule forces all www traffic to the non-www domain, preserving SEO value.
  - type: redirect
    source: "https://www.mayneinspectors.com/**"
    destination: "https://mayneinspectors.com/"
    statusCode: 301

  # This rule forces all traffic to be secure (HTTPS).
  - type: redirect
    source: "http://mayneinspectors.com/**"
    destination: "https://mayneinspectors.com/"
    statusCode: 301

  - type: redirect
    source: "http://www.mayneinspectors.com/**"
    destination: "https://mayneinspectors.com/"
    statusCode: 301

  # Redirects for old capitalized or spaced service area URLs to the new slug format
  - type: redirect
    source: "/service-areas/(LaBelle|Lehigh Acres|Clewiston|Moore Haven|Immokalee|Fort Myers|Cape Coral|Punta Gorda|Port Charlotte|Montura Ranch Estates)"
    destination: "/service-areas/:1"
    statusCode: 301

  # This is the primary rule that serves your website content. It tells App Hosting
  # to handle requests for your custom domain by running your Next.js application.
  - type: rewrite
    source: "/**"
    destination: "/"
    host: "mayneinspectors.com"
